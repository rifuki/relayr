// Sender Requests
export interface FileMetaRequest {
  type: "fileMeta";
  senderId?: string;
  name: string;
  size: number;
  mimeType: string;
}

export interface CancelSenderReadyRequest {
  type: "cancelSenderReady";
  senderId?: string;
}

export interface FileChunkRequest {
  type: "fileChunk";
  senderId?: string;
  fileName: string;
  totalChunks: number;
  totalSize: number;
  chunkIndex: number;
  uploadedSize: number;
  chunkDataSize: number;
  transferProgress: number;
}

export interface FileEndRequest {
  type: "fileEnd";
  senderId?: string;
  fileName: string;
  totalChunks: number;
  totalSize: number;
  lastChunkIndex: number;
  uploadedSize: number;
}

export interface CancelSenderTransferRequest {
  type: "cancelSenderTransfer";
  senderId?: string;
}

export interface SenderAckRequest {
  type: "senderAck";
  requestType: "recipientReady" | "fileChunk";
  recipientId: string;
  status: "success" | "error";
  message?: string;
}

// Sender Responses
export interface ErrorMessageResponse {
  success: false;
  message: string;
  details?: string;
  timestamp: number;
}

export interface RegisterResponse {
  success: true;
  type: "register";
  connId: string;
  timestamp: number;
}

export interface RecipientReadyResponse {
  success: true;
  type: "recipientReady";
  recipientId: string;
  timestamp: number;
}

export interface CancelRecipientReadyResponse {
  success: true;
  type: "cancelRecipientReady";
  recipientId: string;
  timestamp: number;
}

export interface FileTransferAckResponse {
  success: true;
  type: "fileTransferAck";
  status: "acknowledged" | "completed";
  fileName: string;
  totalChunks: number;
  chunkIndex: number;
  chunkDataSize?: number;
  uploadedSize: number;
  transferProgress?: number;
  timestamp: number;
}

export type WebSocketSenderTextMessageResponse =
  | ErrorMessageResponse
  | RegisterResponse
  | RecipientReadyResponse
  | CancelRecipientReadyResponse
  | FileTransferAckResponse;

// ====================================================

// Receiver Requests
export interface RecipientReadyPayload {
  type: "recipientReady";
  senderId: string;
  recipientId?: string;
}

export interface CancelRecipientReadyPayload {
  type: "cancelRecipientReady";
  senderId: string;
  recipientId?: string;
}

// Receiver Responses
export interface CancelSenderReadyResponse {
  success: true;
  type: "cancelSenderReady";
  recipientId: string;
  timestamp: number;
}

export interface SenderAckResponse {
  success: true;
  type: "senderAck";
  requestType: "recipientReady";
  senderId: string;
  status: string;
  message?: string;
  timestamp: number;
}

export type WebSocketReceiverTextMessageResponse =
  | ErrorMessageResponse
  | RegisterResponse
  | CancelSenderReadyResponse
  | SenderAckResponse;
